const { MigrationInterface, QueryRunner } = require("typeorm");

module.exports = class statemine1640853691050 {
    name = 'statemine1640853691050'

    async up(queryRunner) {
        await queryRunner.query(`CREATE TABLE "transfer" ("id" character varying NOT NULL, "amount" numeric, "to" text, "from" text, "delegator" text, "fee" numeric, "type" character varying(9) NOT NULL, "extrinisic_id" text, "success" boolean NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "asset_id" character varying, CONSTRAINT "PK_fd9ddbdd49a17afcbe014401295" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_4cbc37e8c3b47ded161f44c24f" ON "transfer" ("to") `);
        await queryRunner.query(`CREATE INDEX "IDX_be54ea276e0f665ffc38630fc0" ON "transfer" ("from") `);
        await queryRunner.query(`CREATE INDEX "IDX_e818cd083f48ed773afe017f7c" ON "transfer" ("asset_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c1baf61f210786bd446b6d5a0a" ON "transfer" ("type") `);
        await queryRunner.query(`CREATE INDEX "IDX_30ae2831968a3a7f42719cc6f3" ON "transfer" ("extrinisic_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_d0b7149e0dea3bfc1ffa8742a2" ON "transfer" ("success") `);
        await queryRunner.query(`CREATE INDEX "IDX_086e57d995900e69b54046e257" ON "transfer" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_fa5ceda44f4283b48569248386" ON "transfer" ("block_num") `);
        await queryRunner.query(`CREATE TABLE "unique_class" ("id" character varying NOT NULL, "owner" text, "admin" text, "issuer" text, "creator" text, "freezer" text, "total_deposit" numeric, "name" text, "status" character varying(9) NOT NULL, CONSTRAINT "PK_3709d5e3a17fbd4901c0aaa1487" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_86298c2379ad253a57cf5e42df" ON "unique_class" ("owner") `);
        await queryRunner.query(`CREATE INDEX "IDX_d649d6ee098cf67d6d5d964431" ON "unique_class" ("status") `);
        await queryRunner.query(`CREATE TABLE "unique_transfer" ("id" character varying NOT NULL, "to" text, "from" text, "delegator" text, "fee" numeric, "type" character varying(9) NOT NULL, "extrinisic_id" text, "success" boolean NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "unique_class_id" character varying, "unique_instance_id" character varying, CONSTRAINT "PK_7d6ae97266747834d3e832cb8fc" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_7c3c593cba0796b6f6557d3491" ON "unique_transfer" ("to") `);
        await queryRunner.query(`CREATE INDEX "IDX_d37ab4826ac0c2e64ea09ff81c" ON "unique_transfer" ("from") `);
        await queryRunner.query(`CREATE INDEX "IDX_008d9f4e0b30b62b439b092d21" ON "unique_transfer" ("unique_class_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_09165fa651ab2faa61f64c8891" ON "unique_transfer" ("unique_instance_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_1409924d7138ad7b436fe822f4" ON "unique_transfer" ("type") `);
        await queryRunner.query(`CREATE INDEX "IDX_f049c71ea7aaa6a33cd2a0daa2" ON "unique_transfer" ("extrinisic_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e5496308be262a7275159b6047" ON "unique_transfer" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_cb4785ce0fc7c381fcd49de9c5" ON "unique_transfer" ("block_hash") `);
        await queryRunner.query(`CREATE INDEX "IDX_77c80b40c27df04c6f14794718" ON "unique_transfer" ("block_num") `);
        await queryRunner.query(`CREATE TABLE "unique_instance" ("id" character varying NOT NULL, "inner_id" text NOT NULL, "status" character varying(9) NOT NULL, "deposit" numeric, "unique_class_id" character varying NOT NULL, "owner_id" character varying NOT NULL, CONSTRAINT "PK_f7c8a41b5a9d0e3eeb5ab3871b0" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_7ceb0e3b8936e1deac76aaaa66" ON "unique_instance" ("inner_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_afece6c4021225065d4c4112e9" ON "unique_instance" ("unique_class_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_aa027c94b1903ff9271fea05e0" ON "unique_instance" ("owner_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e9a3d5197fd824c71b0a4ed5ad" ON "unique_instance" ("status") `);
        await queryRunner.query(`CREATE TABLE "historical_balance" ("id" character varying NOT NULL, "balance" numeric NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "account_id" character varying NOT NULL, CONSTRAINT "PK_74ac29ad0bdffb6d1281a1e17e8" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_383ff006e4b59db91d32cb891e" ON "historical_balance" ("account_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_96192d95c8ad5b7522c0560ae9" ON "historical_balance" ("balance") `);
        await queryRunner.query(`CREATE INDEX "IDX_822b321c3ad99c302f7ccfa8bd" ON "historical_balance" ("timestamp") `);
        await queryRunner.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "wallet" text NOT NULL, "balance" numeric NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_88b7476f4b8bbcec8defcaffbe" ON "account" ("wallet") `);
        await queryRunner.query(`CREATE INDEX "IDX_d83afa683094d63ab33f8d9a24" ON "account" ("balance") `);
        await queryRunner.query(`CREATE TABLE "asset_balance" ("id" character varying NOT NULL, "balance" numeric NOT NULL, "status" character varying(9) NOT NULL, "account_id" character varying NOT NULL, "asset_id" character varying NOT NULL, CONSTRAINT "PK_7ffc793d0d7d680c10e4741f173" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_55a3340913f4ffe21ffaa0e051" ON "asset_balance" ("account_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_391622bf8cdbb4ca000efcc3fb" ON "asset_balance" ("balance") `);
        await queryRunner.query(`CREATE INDEX "IDX_2b28b6c53509ff0a552da841fb" ON "asset_balance" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_b3bbf183209c65d4306a85a06c" ON "asset_balance" ("asset_id") `);
        await queryRunner.query(`CREATE TABLE "asset" ("id" character varying NOT NULL, "name" text, "symbol" text, "freezer" text, "decimal" integer, "owner" text NOT NULL, "admin" text, "issuer" text, "creator" text, "min_balance" numeric, "status" character varying(9) NOT NULL, "total_supply" numeric, CONSTRAINT "PK_1209d107fe21482beaea51b745e" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_119b2d1c1bdccc42057c303c44" ON "asset" ("name") `);
        await queryRunner.query(`CREATE INDEX "IDX_45b83954906fc214e750ba5328" ON "asset" ("symbol") `);
        await queryRunner.query(`CREATE INDEX "IDX_9e430c71bed276653923f82da3" ON "asset" ("freezer") `);
        await queryRunner.query(`CREATE INDEX "IDX_aba1a1d1626c9dd3be007376b8" ON "asset" ("decimal") `);
        await queryRunner.query(`CREATE INDEX "IDX_fd352fd743f59f9d90ec53f793" ON "asset" ("owner") `);
        await queryRunner.query(`CREATE INDEX "IDX_a525d859e583ca9339ca28223d" ON "asset" ("admin") `);
        await queryRunner.query(`CREATE INDEX "IDX_172c313051ece73a4f722e03ca" ON "asset" ("issuer") `);
        await queryRunner.query(`CREATE INDEX "IDX_70f59c5d3008d237510ab3da1b" ON "asset" ("creator") `);
        await queryRunner.query(`CREATE INDEX "IDX_9822ea5944bcde3771ebe16d86" ON "asset" ("status") `);
        await queryRunner.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_e818cd083f48ed773afe017f7c0" FOREIGN KEY ("asset_id") REFERENCES "asset"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "unique_transfer" ADD CONSTRAINT "FK_008d9f4e0b30b62b439b092d21a" FOREIGN KEY ("unique_class_id") REFERENCES "unique_class"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "unique_transfer" ADD CONSTRAINT "FK_09165fa651ab2faa61f64c8891e" FOREIGN KEY ("unique_instance_id") REFERENCES "unique_instance"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "unique_instance" ADD CONSTRAINT "FK_afece6c4021225065d4c4112e9c" FOREIGN KEY ("unique_class_id") REFERENCES "unique_class"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "unique_instance" ADD CONSTRAINT "FK_aa027c94b1903ff9271fea05e02" FOREIGN KEY ("owner_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "historical_balance" ADD CONSTRAINT "FK_383ff006e4b59db91d32cb891e9" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "asset_balance" ADD CONSTRAINT "FK_55a3340913f4ffe21ffaa0e0510" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "asset_balance" ADD CONSTRAINT "FK_b3bbf183209c65d4306a85a06c4" FOREIGN KEY ("asset_id") REFERENCES "asset"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    async down(queryRunner) {
        await queryRunner.query(`ALTER TABLE "asset_balance" DROP CONSTRAINT "FK_b3bbf183209c65d4306a85a06c4"`);
        await queryRunner.query(`ALTER TABLE "asset_balance" DROP CONSTRAINT "FK_55a3340913f4ffe21ffaa0e0510"`);
        await queryRunner.query(`ALTER TABLE "historical_balance" DROP CONSTRAINT "FK_383ff006e4b59db91d32cb891e9"`);
        await queryRunner.query(`ALTER TABLE "unique_instance" DROP CONSTRAINT "FK_aa027c94b1903ff9271fea05e02"`);
        await queryRunner.query(`ALTER TABLE "unique_instance" DROP CONSTRAINT "FK_afece6c4021225065d4c4112e9c"`);
        await queryRunner.query(`ALTER TABLE "unique_transfer" DROP CONSTRAINT "FK_09165fa651ab2faa61f64c8891e"`);
        await queryRunner.query(`ALTER TABLE "unique_transfer" DROP CONSTRAINT "FK_008d9f4e0b30b62b439b092d21a"`);
        await queryRunner.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_e818cd083f48ed773afe017f7c0"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_9822ea5944bcde3771ebe16d86"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_70f59c5d3008d237510ab3da1b"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_172c313051ece73a4f722e03ca"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_a525d859e583ca9339ca28223d"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_fd352fd743f59f9d90ec53f793"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_aba1a1d1626c9dd3be007376b8"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_9e430c71bed276653923f82da3"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_45b83954906fc214e750ba5328"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_119b2d1c1bdccc42057c303c44"`);
        await queryRunner.query(`DROP TABLE "asset"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_b3bbf183209c65d4306a85a06c"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_2b28b6c53509ff0a552da841fb"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_391622bf8cdbb4ca000efcc3fb"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_55a3340913f4ffe21ffaa0e051"`);
        await queryRunner.query(`DROP TABLE "asset_balance"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d83afa683094d63ab33f8d9a24"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_88b7476f4b8bbcec8defcaffbe"`);
        await queryRunner.query(`DROP TABLE "account"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_822b321c3ad99c302f7ccfa8bd"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_96192d95c8ad5b7522c0560ae9"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_383ff006e4b59db91d32cb891e"`);
        await queryRunner.query(`DROP TABLE "historical_balance"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e9a3d5197fd824c71b0a4ed5ad"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_aa027c94b1903ff9271fea05e0"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_afece6c4021225065d4c4112e9"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7ceb0e3b8936e1deac76aaaa66"`);
        await queryRunner.query(`DROP TABLE "unique_instance"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_77c80b40c27df04c6f14794718"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_cb4785ce0fc7c381fcd49de9c5"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e5496308be262a7275159b6047"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_f049c71ea7aaa6a33cd2a0daa2"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_1409924d7138ad7b436fe822f4"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_09165fa651ab2faa61f64c8891"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_008d9f4e0b30b62b439b092d21"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d37ab4826ac0c2e64ea09ff81c"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7c3c593cba0796b6f6557d3491"`);
        await queryRunner.query(`DROP TABLE "unique_transfer"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d649d6ee098cf67d6d5d964431"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_86298c2379ad253a57cf5e42df"`);
        await queryRunner.query(`DROP TABLE "unique_class"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_fa5ceda44f4283b48569248386"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_086e57d995900e69b54046e257"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d0b7149e0dea3bfc1ffa8742a2"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_30ae2831968a3a7f42719cc6f3"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_c1baf61f210786bd446b6d5a0a"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e818cd083f48ed773afe017f7c"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_be54ea276e0f665ffc38630fc0"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_4cbc37e8c3b47ded161f44c24f"`);
        await queryRunner.query(`DROP TABLE "transfer"`);
    }
}
